{% extends "base.html" %}
{% block content %}

<h2 class="text-2xl font-bold text-center mb-6">🏆 Leaderboard</h2>
<style>
    .fade-in {
      animation: fadeIn 1s ease-in-out;
    }
  
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

{% if not game_started %}
<div class="text-center mt-8">
    <p class="text-lg font-semibold text-gray-700 mb-2">Scan to Join Game</p>
    <img src="/static/qrcode.png" alt="Join QR" class="mx-auto w-64 h-64 border-4 border-dashed border-blue-400 p-2 rounded-lg">
</div>
{% endif %}

<div class="space-y-4 fade-in">
    {% for player in scores %}
    <div class="bg-white shadow-md rounded-xl p-4 flex items-center justify-between border-2 
    {% if loop.index0 == 0 %}
        border-yellow-400
    {% elif loop.index0 == scores|length - 1 %}
        border-red-400
    {% else %}
        border-gray-200
    {% endif %}">

        <div class="flex items-center space-x-4">
            <div class="text-xl font-semibold text-gray-700">
                {{ loop.index }}. {{ player.name }}
                {% if loop.index0 == 0 %}<span class="ml-2">👑</span>{% endif %}
            </div>
        </div>
        <div class="text-right">
            <div class="text-2xl font-bold text-green-700">{{ player.total_score }}</div>
        </div>
    </div>
    {% endfor %}
</div>

<script>
    setInterval(() => {
      const content = document.querySelector('.fade-in');
      if (content) {
        content.classList.remove('fade-in');
        void content.offsetWidth; // Trigger reflow
        content.classList.add('fade-in');
      }
      location.reload();
    }, 80000); // Refresh every 8 seconds
  </script>

{% endblock %}